import{_ as e,a as s}from"./GR1YYozL.js";import{E as a}from"./DnlF_OhZ.js";import{u as o,E as l,a as r}from"./xpCMimhT.js";import{_ as t}from"./DatiTE3o.js";import{E as m}from"./D6s_bp_f.js";import{b as i,a as n,c,d as p,e as d,s as u,f,g,n as b,E as x}from"#entry";import{E as w}from"./DePlfNGU.js";import{l as v,r as h,b as _,B as y,A as j,V as k,Z as V,I as E,X as U,a1 as I,u as T,$ as S,al as $,a0 as q,a9 as z}from"./qvIHbRqB.js";import{_ as A}from"./BCo6x5W8.js";import"./DojV3-Gu.js";import"./BGjgMdPk.js";import"./D3q53r2M.js";import"./nWdyrA1p.js";const C=""+new URL("../images/logo-white-DI0tJvT_.svg",import.meta.url).href,F={class:"login-box h100vh w100% <sm:bg-#fff <sm:h-auto <sm:block!"},J={class:"login-left relative <sm:ma <sm:block! <md:px25px"},K={class:"translate-x-50% bottom-35px right-50% absolute"},L={class:"text-14px c-#84818a flex items-center <sm:c-#fff!"},M={class:"mx10px"},R={class:"login-bottom flex items-center <sm:h-unset!"},B={class:"mb65px <xs:mb25px"},D={class:"text-36px <sm:text-24px <sm:font-bold"},G={class:"pt6px sm:hidden"},H={class:"login-form-content"},O=A(v({__name:"login",setup(v){const{t:A}=i(),{localeProperties:O}=i(),{setUserLoginState:P,isFetch:X}=n();h({verify:""});const Z=_(),N=h({account:"",password:"",remember:!1,code:"",key:""}),Q=h({account:[{required:!0,message:A("username_message")}],password:[{required:!0,message:A("password_message")}]}),W=c("account",void 0),Y=(e,s="info")=>{x({message:e,type:s,appendTo:".login-left",grouping:!0})},[ee,se]=o(async()=>{if(X.value=!0,console.log("login :>> ","login"),!Z.value)return;if(!(await Z.value.validate((e,s)=>{if(!e&&s){const e=s,a=Object.keys(e)[0];if(a){const s=e[a]?.[0]?.message;Y(s,"error")}}})))return;const e={username:N.account?.trim(),password:N.password?.trim(),remember:!!N.remember};console.log("params :>> ",e);const s=await u(e);if(console.log("res :>> ",s),200!==s.code)return Y(s.msg,"error");if(!s.data.accessToken)return Y(A("login_error_message"),"error");if(await P("login",s.data.accessToken),N.remember){const e=f(`${N.account},${N.password}`);W.value=e}else W.value=void 0;const a=g();b(a("index"))}),ae=()=>{N.account?.trim()&&N.password?.trim()&&ee()};return y(()=>{(()=>{if(W.value){const e=d(W.value);if(e){const[s,a]=e.split(",");s&&a&&(N.account=s||"",N.password=a||"",N.remember=!0)}}})()}),(o,i)=>{const n=s,c=a,d=l,u=t,f=m,g=p,b=w,x=r;return k(),j("div",F,[i[6]||(i[6]=V("div",{class:"login-right flex items-center justify-center lt-sm:hidden"},[V("img",{src:C,alt:"logo"})],-1)),V("div",J,[i[5]||(i[5]=V("div",{class:"right-45px top-30px absolute <sm:b-b-1px <sm:b-[var(--co-main-border-color)] <sm:position-unset <sm:-mx25px"},[V("img",{class:"<sm:ma <sm:p15px",src:e,alt:"logo"})],-1)),V("div",K,[E(n,null,{default:U(()=>[V("div",L,[i[3]||(i[3]=V("i",{class:"i-custom-translate?mask text-20px i-icon"},null,-1)),V("span",M,I(T(O).name),1),i[4]||(i[4]=V("i",{class:"i-ep-arrow-down-bold"},null,-1))])]),_:1})]),V("div",R,[E(x,{ref_key:"formRef",ref:Z,model:T(N),rules:T(Q),size:"large","label-position":"top",class:"login-form max-w-100% w385px <sm:w100%",onSubmit:z(T(ee),["prevent"])},{default:U(()=>[V("div",B,[V("h3",D,I(T(A)("sign_in")),1),V("p",G,I(T(A)("welcome")),1)]),V("div",H,[E(d,{label:T(A)("username"),prop:"account",class:S({"is-write":T(N).account})},{default:U(()=>[E(c,{modelValue:T(N).account,"onUpdate:modelValue":i[0]||(i[0]=e=>T(N).account=e),modelModifiers:{trim:!0},type:"text",maxlength:"20",placeholder:T(A)("username placeholder"),autofocus:"",clearable:"",tabindex:"1",onKeyup:$(ae,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label","class"]),E(d,{label:T(A)("password"),prop:"password",class:S({"is-write":T(N).password})},{default:U(()=>[E(u,{modelValue:T(N).password,"onUpdate:modelValue":i[1]||(i[1]=e=>T(N).password=e),modelModifiers:{trim:!0},maxlength:"30",type:"password",placeholder:T(A)("password placeholder"),"show-password":"",tabindex:"2",onKeyup:$(ae,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label","class"]),E(g,null,{default:U(()=>[E(d,null,{default:U(()=>[E(f,{modelValue:T(N).remember,"onUpdate:modelValue":i[2]||(i[2]=e=>T(N).remember=e),class:"remember",label:T(A)("remember_me")},null,8,["modelValue","label"])]),_:1})]),_:1}),E(d,{class:"login-animation4 <sm:pb5px"},{default:U(()=>[E(b,{type:"primary",class:"w100% h46px!",loading:T(se),tabindex:"4",onClick:T(ee)},{default:U(()=>[q(I(T(A)("login")),1)]),_:1},8,["loading","onClick"])]),_:1})])]),_:1},8,["model","rules","onSubmit"])])])])}}}),[["__scopeId","data-v-1f418fd1"]]);export{O as default};
