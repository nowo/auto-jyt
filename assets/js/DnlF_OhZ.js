import{R as e,n as t,a,k as o,b as n,q as l,u as s,a5 as i,x as r,l as u,ar as d,aw as p,y as c,t as f,A as v,V as m,a7 as h,H as y,Z as b,$ as g,W as x,a6 as w,X as C,a8 as S,a4 as k,a9 as z,a3 as E,a1 as I,_ as F,O as B}from"./qvIHbRqB.js";import{o as P,by as $,q as N,r as R,t as V,ak as _,S as A,a7 as M,bl as T,C as j,v as H,z as O,bz as L,bA as W,bB as U,U as K,aN as q,D,aC as Z,P as X}from"#entry";import{U as Y,u as G,h as J,d as Q,I as ee,C as te}from"./BGjgMdPk.js";import{c as ae,u as oe,a as ne,b as le}from"./DePlfNGU.js";let se;const ie={height:"0",visibility:"hidden",overflow:$()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},re=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"];function ue(e,t=1,a){var o,n;se||(se=document.createElement("textarea"),(null!=(o=e.parentNode)?o:document.body).appendChild(se));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:re.map(e=>[e,t.getPropertyValue(e)]),paddingSize:o,borderSize:n,boxSizing:a}}(e);r.forEach(([e,t])=>null==se?void 0:se.style.setProperty(e,t)),Object.entries(ie).forEach(([e,t])=>null==se?void 0:se.style.setProperty(e,t,"important")),se.value=e.value||e.placeholder||"";let u=se.scrollHeight;const d={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),se.value="";const p=se.scrollHeight-l;if(P(t)){let e=p*t;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),d.minHeight=`${e}px`}if(P(a)){let e=p*a;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return d.height=`${u}px`,null==(n=se.parentNode)||n.removeChild(se),se=void 0,d}const de=N({id:{type:String,default:void 0},size:M,disabled:Boolean,modelValue:{type:R([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:R([Boolean,Object]),default:!1},autocomplete:{type:R(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:_,default:A},showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:_},prefixIcon:{type:_},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:R([Object,Array,String]),default:()=>V({})},autofocus:Boolean,rows:{type:Number,default:2},...G(["ariaLabel"]),inputmode:{type:R(String),default:void 0},name:String}),pe={[Y]:t=>e(t),input:t=>e(t),change:t=>e(t),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ce=["class","style"],fe=/^on[A-Z]/,ve=(e={})=>{const{excludeListeners:o=!1,excludeKeys:n}=e,l=t(()=>((null==n?void 0:n.value)||[]).concat(ce)),s=a();return t(s?()=>{var e;return T(Object.entries(null==(e=s.proxy)?void 0:e.$attrs).filter(([e])=>!(l.value.includes(e)||o&&fe.test(e))))}:()=>({}))};function me(e,{disabled:t,beforeFocus:r,afterFocus:u,beforeBlur:d,afterBlur:p}={}){const c=a(),{emit:f}=c,v=o(),m=n(!1),h=e=>{const a=!!i(r)&&r(e);s(t)||m.value||a||(m.value=!0,f("focus",e),null==u||u())},y=e=>{var a;const o=!!i(d)&&d(e);s(t)||e.relatedTarget&&(null==(a=v.value)?void 0:a.contains(e.relatedTarget))||o||(m.value=!1,f("blur",e),null==p||p())};return l([v,()=>s(t)],([e,t])=>{e&&(t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1"))}),j(v,"focus",h,!0),j(v,"blur",y,!0),j(v,"click",a=>{var o,n;s(t)||J(a.target)||(null==(o=v.value)?void 0:o.contains(document.activeElement))&&v.value!==document.activeElement||null==(n=e.value)||n.focus()},!0),{isFocused:m,wrapperRef:v,handleFocus:h,handleBlur:y}}function he({afterComposition:e,emit:t}){const a=n(!1),o=e=>{var o;null==t||t("compositionupdate",e);const n=null==(o=e.target)?void 0:o.value,l=n[n.length-1]||"";a.value=!(e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e))(l)},l=o=>{null==t||t("compositionend",o),a.value&&(a.value=!1,r(()=>e(o)))};return{isComposing:a,handleComposition:e=>{"compositionend"===e.type?l(e):o(e)},handleCompositionStart:e=>{null==t||t("compositionstart",e),a.value=!0},handleCompositionUpdate:o,handleCompositionEnd:l}}const ye=u({name:"ElInput",inheritAttrs:!1});const be=X(H(u({...ye,props:de,emits:pe,setup(e,{expose:a,emit:i}){const u=e,P=d(),$=ve(),N=p(),R=t(()=>["textarea"===u.type?X.b():H.b(),H.m(T.value),H.is("disabled",j.value),H.is("exceed",Pe.value),{[H.b("group")]:N.prepend||N.append,[H.m("prefix")]:N.prefix||u.prefixIcon,[H.m("suffix")]:N.suffix||u.suffixIcon||u.clearable||u.showPassword,[H.bm("suffix","password-clear")]:Ee.value&&Ie.value,[H.b("hidden")]:"hidden"===u.type},P.class]),V=t(()=>[H.e("wrapper"),H.is("focus",fe.value)]),{form:_,formItem:A}=ne(),{inputId:M}=le(u,{formItemContext:A}),T=ae(),j=oe(),H=O("input"),X=O("textarea"),G=o(),J=o(),se=n(!1),ie=n(!1),re=n(),de=o(u.inputStyle),pe=t(()=>G.value||J.value),{wrapperRef:ce,isFocused:fe,handleFocus:ye,handleBlur:be}=me(pe,{disabled:j,afterBlur(){var e;u.validateEvent&&(null==(e=null==A?void 0:A.validate)||e.call(A,"blur").catch(e=>Q()))}}),ge=t(()=>{var e;return null!=(e=null==_?void 0:_.statusIcon)&&e}),xe=t(()=>(null==A?void 0:A.validateState)||""),we=t(()=>xe.value&&L[xe.value]),Ce=t(()=>ie.value?W:U),Se=t(()=>[P.style]),ke=t(()=>[u.inputStyle,de.value,{resize:u.resize}]),ze=t(()=>K(u.modelValue)?"":String(u.modelValue)),Ee=t(()=>u.clearable&&!j.value&&!u.readonly&&!!ze.value&&(fe.value||se.value)),Ie=t(()=>u.showPassword&&!j.value&&!!ze.value),Fe=t(()=>u.showWordLimit&&!!u.maxlength&&("text"===u.type||"textarea"===u.type)&&!j.value&&!u.readonly&&!u.showPassword),Be=t(()=>ze.value.length),Pe=t(()=>!!Fe.value&&Be.value>Number(u.maxlength)),$e=t(()=>!!N.suffix||!!u.suffixIcon||Ee.value||u.showPassword||Fe.value||!!xe.value&&ge.value),[Ne,Re]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(G);q(J,e=>{if(_e(),!Fe.value||"both"!==u.resize)return;const t=e[0],{width:a}=t.contentRect;re.value={right:`calc(100% - ${a+15+6}px)`}});const Ve=()=>{const{type:e,autosize:t}=u;if(Z&&"textarea"===e&&J.value)if(t){const e=B(t)?t.minRows:void 0,a=B(t)?t.maxRows:void 0,o=ue(J.value,e,a);de.value={overflowY:"hidden",...o},r(()=>{J.value.offsetHeight,de.value=o})}else de.value={minHeight:ue(J.value).minHeight}},_e=(e=>{let t=!1;return()=>{var a;if(t||!u.autosize)return;null===(null==(a=J.value)?void 0:a.offsetParent)||(setTimeout(e),t=!0)}})(Ve),Ae=()=>{const e=pe.value,t=u.formatter?u.formatter(ze.value):ze.value;e&&e.value!==t&&(e.value=t)},Me=async e=>{Ne();let{value:t}=e.target;u.formatter&&u.parser&&(t=u.parser(t)),je.value||(t!==ze.value?(i(Y,t),i(ee,t),await r(),Ae(),Re()):Ae())},Te=e=>{let{value:t}=e.target;u.formatter&&u.parser&&(t=u.parser(t)),i(te,t)},{isComposing:je,handleCompositionStart:He,handleCompositionUpdate:Oe,handleCompositionEnd:Le}=he({emit:i,afterComposition:Me}),We=()=>{Ne(),ie.value=!ie.value,setTimeout(Re)},Ue=e=>{se.value=!1,i("mouseleave",e)},Ke=e=>{se.value=!0,i("mouseenter",e)},qe=e=>{i("keydown",e)},De=()=>{i(Y,""),i(te,""),i("clear"),i(ee,"")};return l(()=>u.modelValue,()=>{var e;r(()=>Ve()),u.validateEvent&&(null==(e=null==A?void 0:A.validate)||e.call(A,"change").catch(e=>Q()))}),l(ze,()=>Ae()),l(()=>u.type,async()=>{await r(),Ae(),Ve()}),c(()=>{!u.formatter&&u.parser,Ae(),r(Ve)}),a({input:G,textarea:J,ref:pe,textareaStyle:ke,autosize:f(u,"autosize"),isComposing:je,focus:()=>{var e;return null==(e=pe.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=pe.value)?void 0:e.blur()},select:()=>{var e;null==(e=pe.value)||e.select()},clear:De,resizeTextarea:Ve}),(e,t)=>(m(),v("div",{class:g([s(R),{[s(H).bm("group","append")]:e.$slots.append,[s(H).bm("group","prepend")]:e.$slots.prepend}]),style:F(s(Se)),onMouseenter:Ke,onMouseleave:Ue},[h(" input "),"textarea"!==e.type?(m(),v(y,{key:0},[h(" prepend slot "),e.$slots.prepend?(m(),v("div",{key:0,class:g(s(H).be("group","prepend"))},[x(e.$slots,"prepend")],2)):h("v-if",!0),b("div",{ref_key:"wrapperRef",ref:ce,class:g(s(V))},[h(" prefix slot "),e.$slots.prefix||e.prefixIcon?(m(),v("span",{key:0,class:g(s(H).e("prefix"))},[b("span",{class:g(s(H).e("prefix-inner"))},[x(e.$slots,"prefix"),e.prefixIcon?(m(),w(s(D),{key:0,class:g(s(H).e("icon"))},{default:C(()=>[(m(),w(S(e.prefixIcon)))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0),b("input",k({id:s(M),ref_key:"input",ref:G,class:s(H).e("inner")},s($),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?ie.value?"text":"password":e.type,disabled:s(j),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:s(He),onCompositionupdate:s(Oe),onCompositionend:s(Le),onInput:Me,onChange:Te,onKeydown:qe}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),h(" suffix slot "),s($e)?(m(),v("span",{key:1,class:g(s(H).e("suffix"))},[b("span",{class:g(s(H).e("suffix-inner"))},[s(Ee)&&s(Ie)&&s(Fe)?h("v-if",!0):(m(),v(y,{key:0},[x(e.$slots,"suffix"),e.suffixIcon?(m(),w(s(D),{key:0,class:g(s(H).e("icon"))},{default:C(()=>[(m(),w(S(e.suffixIcon)))]),_:1},8,["class"])):h("v-if",!0)],64)),s(Ee)?(m(),w(s(D),{key:1,class:g([s(H).e("icon"),s(H).e("clear")]),onMousedown:z(s(E),["prevent"]),onClick:De},{default:C(()=>[(m(),w(S(e.clearIcon)))]),_:1},8,["class","onMousedown"])):h("v-if",!0),s(Ie)?(m(),w(s(D),{key:2,class:g([s(H).e("icon"),s(H).e("password")]),onClick:We},{default:C(()=>[(m(),w(S(s(Ce))))]),_:1},8,["class"])):h("v-if",!0),s(Fe)?(m(),v("span",{key:3,class:g(s(H).e("count"))},[b("span",{class:g(s(H).e("count-inner"))},I(s(Be))+" / "+I(e.maxlength),3)],2)):h("v-if",!0),s(xe)&&s(we)&&s(ge)?(m(),w(s(D),{key:4,class:g([s(H).e("icon"),s(H).e("validateIcon"),s(H).is("loading","validating"===s(xe))])},{default:C(()=>[(m(),w(S(s(we))))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0)],2),h(" append slot "),e.$slots.append?(m(),v("div",{key:1,class:g(s(H).be("group","append"))},[x(e.$slots,"append")],2)):h("v-if",!0)],64)):(m(),v(y,{key:1},[h(" textarea "),b("textarea",k({id:s(M),ref_key:"textarea",ref:J,class:[s(X).e("inner"),s(H).is("focus",s(fe))]},s($),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:s(j),readonly:e.readonly,autocomplete:e.autocomplete,style:s(ke),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:s(He),onCompositionupdate:s(Oe),onCompositionend:s(Le),onInput:Me,onFocus:s(ye),onBlur:s(be),onChange:Te,onKeydown:qe}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),s(Fe)?(m(),v("span",{key:0,style:F(re.value),class:g(s(H).e("count"))},I(s(Be))+" / "+I(e.maxlength),7)):h("v-if",!0)],64))],38))}}),[["__file","input.vue"]]));export{be as E,me as a,he as b,ve as u};
