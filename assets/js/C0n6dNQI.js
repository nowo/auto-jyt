import{_ as t,a}from"./CWcflZNr.js";import{_ as e,a as s,e as o,m as n}from"./DaymMoic.js";import{a as r,b as i}from"./DeCiPARL.js";import{_ as l}from"./dsrEqqer.js";import{_ as m}from"./6wzefA8c.js";import{b as u,h as d,i as p,w as c,E as _,p as b}from"#entry";import"./D3PoWbaM.js";import{E as g}from"./Cnq9u0K6.js";import"./Br2YYjqU.js";import"./CdvHYUIO.js";import{a as f}from"./BHdYX4XE.js";import{l as h,b as y,r as w,y as x,am as j,Y as N,u as v,V,a6 as T,X as k,I as L,d as z,a7 as H,A as U,H as B,ao as R,ag as S,ah as W,a0 as C,a1 as E}from"./qvIHbRqB.js";import"./CWVXppPA.js";import"./BhNkJ2ei.js";import"./BCo6x5W8.js";import"./B2NKXgsO.js";import"./nWdyrA1p.js";import"./BmNVMyPn.js";import"./dXXNWbSs.js";import"./Bu3XdQOP.js";import"./CDYU1Ovi.js";import"./DTHePhLE.js";import"./BzC0bYcU.js";import"./HrbjBr_z.js";import"./C-SUzy-B.js";import"./B4uwOkQJ.js";const I=(t,a=2)=>("string"==typeof t&&(t=Number(t)),t.toFixed(a)),A=h({__name:"index",setup(h){const{t:A}=u(),{isMobile:D}=d(),F=y(),M=w({statusList:[{status:1,num:5,text:A("active")},{status:2,num:2,text:A("disabled")},{status:3,num:1,text:A("unsettled")},{status:7,num:3,text:A("pending_risk_review")},{status:8,num:5,text:A("pending_settlement")},{status:9,num:5,text:A("in_grace_period")},{status:100,num:5,text:A("pending_closure")},{status:101,num:4,text:A("closed")},{status:201,num:4,text:A("any_active")},{status:202,num:4,text:A("any_closed")}],disableList:{0:A("none"),1:A("ads_integrity_policy"),2:A("ads_ip_review"),3:A("risk_payment"),4:A("gray_account_shut_down"),5:A("ads_afc_review"),6:A("business_integrity_rar"),7:A("permanent_close"),8:A("unused_reseller_account"),9:A("unused_account"),10:A("umbrella_ad_account"),11:A("business_manager_integrity_policy"),12:A("misrepresented_ad_account"),13:A("aoab_deshare_legal_entity"),14:A("ctx_thread_review"),15:A("compromised_ad_account")},total:0}),$=t=>{"string"==typeof t&&(t=Number.parseInt(t));const a=M.statusList.find(a=>a.status===t);return{num:a?.num,text:a?.text||""}},J=w({data:{account:"",account_name:"",time:["",""],state:"",status:"",bm_id:""},config:[{column:{label:A("ad_name"),prop:"account_name"},placeholder:A("ad_name"),width:"160",filterType:1},{column:{label:A("account_id"),prop:"account"},placeholder:A("account_id"),width:"160",filterType:1},{column:{label:A("status"),prop:"status"},placeholder:A("status"),width:"100",filterType:1},{column:{label:A("bm_id"),prop:"bm_id"},placeholder:A("bm_id"),width:"100",filterType:1}],hideBtn:!1,searchNum:0}),O=w({money:[]}),P=w({data:[],tableHeader:[{type:"selection",width:"45",other:{isHide:!0}},{property:"ad_name",label:A("ad_name"),minWidth:"180",sortable:!0},{property:"ad_account_id",label:A("account_id"),width:"180"},{property:"account",label:A("bm_name"),width:"180"},{property:"role",label:A("bm_id"),width:"150",align:"left"},{property:"business_country_code",label:A("country"),width:"180"},{property:"status",label:A("status"),width:"180"},{property:"balance",label:A("balance"),width:"130",sortable:!0,formatter:(t,a,e)=>I(Number(e),4)},{property:"spend_cap",label:A("spend_cap"),width:"160",sortable:!0,formatter:(t,a,e)=>I(Number(e),4)},{property:"amount_spent",label:A("amount_spent"),width:"160",sortable:!0,formatter:(t,a,e)=>I(Number(e),4)},{property:"remaining_amount",label:A("remaining_amount"),minWidth:"190",sortable:!0,formatter:(t,a,e)=>I(Number(e),4)},{property:"disable_reason",label:A("disable_reason"),minWidth:"180"},{property:"timezone_name",label:A("timezone name"),width:"220"},{property:"operate",label:A("action"),width:"120",align:"left",fixed:"right",other:{isHide:!0}}],pagination:p(b),isTool:!0,hideButton:{add:!0,delete:!0}}),Q=async()=>{const t={account_id:J.data.account.trim(),account_name:J.data.account_name.trim(),bm_id:J.data.bm_id.trim(),account_status:J.data.status,page:P.pagination.page,limit:P.pagination.pageSize};t.account_id||delete t.account_id,t.account_name||delete t.account_name,t.bm_id||delete t.bm_id,""===t.account_status&&delete t.account_status,P.loading=!0;const a=await f(t);if(console.log("res :>> ",a),await c(5e4),P.loading=!1,200!==a.code)return _.error(a.msg);J.searchNum=(J.searchNum||0)+1,P.data=a.data.list.map(t=>({...t,balance:Number(t.balance),spend_cap:Number(t.spend_cap),amount_spent:Number(t.amount_spent),remaining_amount:Number(t.balance)-Number(t.amount_spent)})),P.pagination.total=a.data.total||0,M.total=a.data.total||0},X=()=>{Q()},Y=()=>{Q()},q=(t,a)=>{let e=P.data;if("all"===t.range||"selected"===t.range&&(e=a),0===e.length)return _.error(A("no_data_export_message"));const s=t.filename||`account_${Date.now()}`;o(e,`${s+t.suffix}`)},G=()=>{g.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:A("confirm"),message:n(A("export_data_message"),A("export_data")),buttonSize:"large",center:!1,customClass:"la-message-box export-message"}).then(async()=>{q({suffix:".xlsx",range:"current"},P.data)}).catch(()=>{})};return x(()=>{Q()}),(o,n)=>{const u=a,d=s,p=i,c=r,_=e,b=l,g=t,f=m,h=j("loadings");return N((V(),T(f,{class:"hei"},{default:k(()=>[L(g,{ref_key:"tableRef",ref:F,option:v(P),"onUpdate:option":n[0]||(n[0]=t=>z(P)?P.value=t:null),onRefresh:Q,onExport:q,onPagination:Q},{spend_cap:k(({row:t})=>[C(E(0===Number(t.spend_cap)?"-":t.spend_cap),1)]),disable_reason:k(({row:t})=>[C(E(v(M).disableList[t.disable_reason]),1)]),status:k(({row:t})=>[L(b,S(W($(t.ad_account_status))),null,16)]),default:k(()=>[v(D)?(V(),T(u,{key:0,"show-text":"",onClick:G})):H("",!0),L(_,{option:v(J),rules:v(O),onSearch:X,onReset:Y},{time:k(({row:t})=>[L(d,{modelValue:t.time,"onUpdate:modelValue":a=>t.time=a,teleported:!1},null,8,["modelValue","onUpdate:modelValue"])]),status:k(({row:t})=>[L(c,{modelValue:t.status,"onUpdate:modelValue":a=>t.status=a,teleported:!1,clearable:""},{default:k(()=>[(V(!0),U(B,null,R(v(M).statusList,t=>(V(),T(p,{key:t.status,label:t.text,value:t.status},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["option","rules"])]),_:1},8,["option"])]),_:1})),[[h,v(P).loading]])}}});export{A as default};
