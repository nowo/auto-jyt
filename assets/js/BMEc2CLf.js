import{_ as e,a as t}from"./CWcflZNr.js";import{_ as a,a as o,m as i,e as r}from"./DaymMoic.js";import{E as s}from"./DeCiPARL.js";import{E as l}from"./Br2YYjqU.js";import{_ as n}from"./BjKo_cPK.js";import{_ as d}from"./Bu3XdQOP.js";import{b as m,j as p,h as u,i as c,g as f,n as _,k as g,E as h,p as x}from"#entry";import{b}from"./B2NKXgsO.js";import{l as j,b as y,r as w,n as v,an as k,a6 as C,V as q,u as R,X as V,I as z,d as E,a7 as M,a0 as B}from"./qvIHbRqB.js";import{_ as T}from"./6wzefA8c.js";import{E as U}from"./Cnq9u0K6.js";import"./CdvHYUIO.js";import"./CWVXppPA.js";import"./BhNkJ2ei.js";import"./BCo6x5W8.js";import"./BmNVMyPn.js";import"./D3PoWbaM.js";import"./dXXNWbSs.js";import"./nWdyrA1p.js";import"./DTHePhLE.js";import"./BzC0bYcU.js";import"./HrbjBr_z.js";import"./C-SUzy-B.js";import"./B4uwOkQJ.js";import"./CDYU1Ovi.js";import"./Bt4GWYqb.js";import"./dsrEqqer.js";const D=j({__name:"PixelModal",emits:["update"],setup(e,{expose:t,emit:a}){const{t:o}=m(),i=a,r=y(),s=w({visible:!1,ready:!1,hrefList:["/","/about","/product","/news","/service","/recruit","/contact"]}),l=v(()=>"add"===r.value?{title:o("create")}:{title:o("edit")}),u=k("formRef");w({data:{id:0,p_id:0,title:"",title_en:"",href:"",icon:"",sort:0,status:1,imgList:[]}}),w({title:[{required:!0,whitespace:!0,message:o("required"),trigger:"blur"}],title_en:[{required:!0,whitespace:!0,message:o("required"),trigger:"blur"}],href:[{required:!0,whitespace:!0,message:o("required"),trigger:"blur"}],img:[{required:!0,whitespace:!0,message:o("required"),trigger:"blur"}]});const c=()=>{u.value?.formRef?.resetFields()},[f,_]=b(),g=p(async()=>{if(!u.value)return;const e=await f(u.value?.onConfirm());console.log("res0000 :>> ",e),!0===e&&(i("update"),s.visible=!1)},800);return t({openModal:(e,t)=>{r.value=e,u.value?.setFormData(e,t),s.visible=!0}}),(e,t)=>{const a=n,o=d;return q(),C(o,{modelValue:R(s).visible,"onUpdate:modelValue":t[0]||(t[0]=e=>R(s).visible=e),name:"drawer","hide-full":"",title:R(l).title,loading:R(_),width:"480px",size:550,direction:"rtl",onCancel:c,onConfirm:R(g)},{default:V(()=>[z(a,{ref_key:"formRef",ref:u,class:"max-w-100% w650px"},null,512)]),_:1},8,["modelValue","title","loading","onConfirm"])}}}),S=Object.assign(D,{__name:"PixelModal"}),W=j({__name:"index",setup(n){const{t:d}=m(),{isMobile:p}=u(),b=k("modalRef");w({});const j=w({data:{account:"",title:"",apply_id:"",time:["",""],state:""},config:[{column:{label:d("id"),prop:"title"},placeholder:d("id"),width:"160"},{column:{label:d("pixel_name"),prop:"account"},placeholder:d("pixel_name"),width:"160"},{column:{label:d("pixel_id"),prop:"state"},placeholder:d("pixel_id"),width:"100"}],hideBtn:!1}),y=w({money:[]}),v=w({data:[],tableHeader:[{type:"selection",width:"100",other:{isHide:!0}},{property:"id",label:d("id"),minWidth:"180",sortable:!0},{property:"username",label:d("pixel_name"),minWidth:"180"},{property:"role",label:d("pixel_id"),minWidth:"150"}],pagination:c(x),isTool:!0,hideButton:{delete:!0}}),D=async()=>{v.data=[{id:1,username:"张三",account:"zhangsan",role:"管理员",status:"正常",created_at:"2022-01-01 12:00:00"},{id:2,username:"李四",account:"lisi",role:"普通用户",status:"禁用",created_at:"2022-01-02 12:00:00"}],v.pagination.total=2},W=()=>{D()},F=()=>{D()},H=(e,t)=>{if(p.value){const e=f();_(e("pixel-create"))}else b.value?.openModal(e,t)},L=()=>{U.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:d("confirm"),message:i(d("export_data_message"),d("export_data")),buttonSize:"large",center:!1,customClass:"la-message-box export-message"}).then(async()=>{(e=>{let t=v.data;if(0===t.length)return h.error(d("no_data_export_message"));const a=e.filename||`account_${Date.now()}`;r(t,`${a+e.suffix}`)})({suffix:".xlsx"},v.data)}).catch(()=>{})};return D(),(r,n)=>{const m=t,u=o,c=a,f=s,_=l,x=e,w=S,k=T;return q(),C(k,null,{default:V(()=>[z(x,{option:R(v),"onUpdate:option":n[2]||(n[2]=e=>E(v)?v.value=e:null),size:"large",onRefresh:D,onAdd:n[3]||(n[3]=e=>H("add")),onEdit:n[4]||(n[4]=e=>H("edit"))},{status:V(({row:e})=>[e.status?(q(),C(f,{key:0,type:"primary"},{default:V(()=>[...n[5]||(n[5]=[B(" 启用 ",-1)])]),_:1})):(q(),C(f,{key:1,type:"info"},{default:V(()=>[...n[6]||(n[6]=[B(" 禁用 ",-1)])]),_:1}))]),operate:V(({row:e})=>[z(_,{type:"primary",link:"",onClick:t=>H("edit",e)},{default:V(()=>[...n[7]||(n[7]=[B(" Edit ",-1)])]),_:1},8,["onClick"]),z(_,{type:"danger",link:"",onClick:t=>(e=>{U.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:d("delete"),message:i(d("delete_seller_message"),d("delete_seller")),buttonSize:"large",center:!1,customClass:"message-box-error"}).then(async()=>{const t=await g("/api/v1/product/delete",{method:"post",body:{id:e.id}});if(200!==t.code)return h.error(t.msg);h.success("删除成功"),D()}).catch(()=>{})})(e)},{default:V(()=>[...n[8]||(n[8]=[B(" Del ",-1)])]),_:1},8,["onClick"])]),default:V(()=>[R(p)?(q(),C(m,{key:0,"show-text":"",onClick:L})):M("",!0),z(c,{option:R(j),"onUpdate:option":n[1]||(n[1]=e=>E(j)?j.value=e:null),rules:R(y),onSearch:W,onReset:F},{time:V(()=>[z(u,{modelValue:R(j).data.time,"onUpdate:modelValue":n[0]||(n[0]=e=>R(j).data.time=e),type:"daterange","range-separator":"To",teleported:!1},null,8,["modelValue"])]),_:1},8,["option","rules"])]),_:1},8,["option"]),z(w,{ref_key:"modalRef",ref:b},null,512)]),_:1})}}});export{W as default};
