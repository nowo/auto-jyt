import{a2 as e,am as a,h as t,b as u,bf as s,aW as l,n}from"#entry";import{n as r,i}from"./qvIHbRqB.js";const v=()=>{const v=e(),o=a().getRoutes(),{isCurrentFullscreen:h,themeConfig:p}=t(),{locale:c,t:f}=u(),m=r(()=>{const e=`___${c.value}`;return o.filter(a=>!(!a.name.endsWith(e)||!a?.meta?.visible)).map(e=>{const a=e.meta.key;return e.meta.title=a?f(a):e.meta.title||e.name,e.meta.sort=e.meta.sort||0,e}).sort((e,a)=>Number(e.meta?.sort??0)-Number(a.meta?.sort??0))}),d=s("adminMenu",[]);Array.isArray(d.value)?(d.value=[...new Set(d.value)],d.value.includes(l)||d.value.unshift(l)):d.value=[l],p.value.isTagsView&&m.value.find(e=>e.path===v.path)&&!d.value.includes(v.path)&&d.value.push(v.path);const g=r(()=>{const e=Array.isArray(d.value)?d.value:[],a=[];return e.forEach(e=>{const t=m.value.find(a=>a.path===e);t&&a.push(t)}),a}),y=i("reload");return{tagMenuList:g,adminRoutes:m,storageMenuList:d,updateStoreMenuList:(e,a)=>{if(!p.value.isTagsView)return;const t=d.value.findIndex(a=>a===e.path);if(2===a?t>=0&&d.value.splice(t,1):t<0&&d.value.push(e.path),!d.value.includes(v.path))if(t<d.value.length-1)n(g.value[t]);else{const e=g.value[g.value.length-1];n(e)}},setStoreMenuList:(e,a)=>{Array.isArray(d.value)||(d.value=[]);const t=d.value.findIndex(e=>e===a.path),u=g.value.filter(e=>e.meta?.isAffix).map(e=>e.path);if(1===e)v.path===a.path?y?.():n(a);else if(2===e){if(d.value.length<=1)return;t>=0&&d.value.splice(t,1);const e=g.value[g.value.length-1];e&&n(e)}else if(3===e)u.includes(a.path)||u.push(a.path),d.value=u,n(a);else if(4===e){d.value=u;const e=g.value[g.value.length-1];n(e)}else 5===e&&(n(a),h.value=!0)}}};function o(e){return!0}export{o as c,v as u};
