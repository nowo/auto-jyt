import{_ as t,a}from"./BSK6R3Kw.js";import{_ as e,a as s,e as o,m as n}from"./BvnZrAqM.js";import{a as r,b as i}from"./QgfGNtND.js";import{_ as l}from"./C350UM4L.js";import{_ as m}from"./6wzefA8c.js";import{b as u,h as d,i as p,E as c,p as _}from"#entry";import"./DojV3-Gu.js";import{E as b}from"./C2CHy1xO.js";import"./DePlfNGU.js";import"./DnlF_OhZ.js";import{a as g}from"./BHdYX4XE.js";import{l as f,b as h,r as y,y as x,am as w,Y as j,u as N,V as v,a6 as V,X as T,I as k,d as L,a7 as z,A as H,H as U,ao as B,ag as R,ah as S,a0 as W,a1 as C}from"./qvIHbRqB.js";import"./D6s_bp_f.js";import"./BGjgMdPk.js";import"./BCo6x5W8.js";import"./xpCMimhT.js";import"./nWdyrA1p.js";import"./DGWdRBvD.js";import"./D3q53r2M.js";import"./CujsH0_s.js";import"./eFjWS5rx.js";import"./DTHePhLE.js";import"./BzC0bYcU.js";import"./DqwO7j9R.js";import"./C-SUzy-B.js";import"./B4uwOkQJ.js";const E=(t,a=2)=>("string"==typeof t&&(t=Number(t)),t.toFixed(a)),I=f({__name:"index",setup(f){const{t:I}=u(),{isMobile:A}=d(),D=h(),F=y({statusList:[{status:1,num:5,text:I("active")},{status:2,num:2,text:I("disabled")},{status:3,num:1,text:I("unsettled")},{status:7,num:3,text:I("pending_risk_review")},{status:8,num:5,text:I("pending_settlement")},{status:9,num:5,text:I("in_grace_period")},{status:100,num:5,text:I("pending_closure")},{status:101,num:4,text:I("closed")},{status:201,num:4,text:I("any_active")},{status:202,num:4,text:I("any_closed")}],disableList:{0:I("none"),1:I("ads_integrity_policy"),2:I("ads_ip_review"),3:I("risk_payment"),4:I("gray_account_shut_down"),5:I("ads_afc_review"),6:I("business_integrity_rar"),7:I("permanent_close"),8:I("unused_reseller_account"),9:I("unused_account"),10:I("umbrella_ad_account"),11:I("business_manager_integrity_policy"),12:I("misrepresented_ad_account"),13:I("aoab_deshare_legal_entity"),14:I("ctx_thread_review"),15:I("compromised_ad_account")},total:0}),M=t=>{"string"==typeof t&&(t=Number.parseInt(t));const a=F.statusList.find(a=>a.status===t);return{num:a?.num,text:a?.text||""}},$=y({data:{account:"",account_name:"",time:["",""],state:"",status:"",bm_id:""},config:[{column:{label:I("ad_name"),prop:"account_name"},placeholder:I("ad_name"),width:"160",filterType:1},{column:{label:I("account_id"),prop:"account"},placeholder:I("account_id"),width:"160",filterType:1},{column:{label:I("status"),prop:"status"},placeholder:I("status"),width:"100",filterType:1},{column:{label:I("bm_id"),prop:"bm_id"},placeholder:I("bm_id"),width:"100",filterType:1}],hideBtn:!1,searchNum:0}),J=y({money:[]}),O=y({data:[],tableHeader:[{type:"selection",width:"45",other:{isHide:!0}},{property:"ad_name",label:I("ad_name"),minWidth:"180",sortable:!0},{property:"ad_account_id",label:I("account_id"),width:"180"},{property:"account",label:I("bm_name"),width:"180"},{property:"role",label:I("bm_id"),width:"150",align:"left"},{property:"business_country_code",label:I("country"),width:"180"},{property:"status",label:I("status"),width:"180"},{property:"balance",label:I("balance"),width:"130",sortable:!0,formatter:(t,a,e)=>E(Number(e),4)},{property:"spend_cap",label:I("spend_cap"),width:"160",sortable:!0,formatter:(t,a,e)=>E(Number(e),4)},{property:"amount_spent",label:I("amount_spent"),width:"160",sortable:!0,formatter:(t,a,e)=>E(Number(e),4)},{property:"remaining_amount",label:I("remaining_amount"),minWidth:"190",sortable:!0,formatter:(t,a,e)=>E(Number(e),4)},{property:"disable_reason",label:I("disable_reason"),minWidth:"180"},{property:"timezone_name",label:I("timezone name"),width:"220"},{property:"operate",label:I("action"),width:"120",align:"left",fixed:"right",other:{isHide:!0}}],pagination:p(_),isTool:!0,hideButton:{add:!0,delete:!0}}),P=async()=>{const t={account_id:$.data.account.trim(),account_name:$.data.account_name.trim(),bm_id:$.data.bm_id.trim(),account_status:$.data.status,page:O.pagination.page,limit:O.pagination.pageSize};t.account_id||delete t.account_id,t.account_name||delete t.account_name,t.bm_id||delete t.bm_id,""===t.account_status&&delete t.account_status,O.loading=!0;const a=await g(t);if(console.log("res :>> ",a),O.loading=!1,200!==a.code)return c.error(a.msg);$.searchNum=($.searchNum||0)+1,O.data=a.data.list.map(t=>({...t,balance:Number(t.balance),spend_cap:Number(t.spend_cap),amount_spent:Number(t.amount_spent),remaining_amount:Number(t.balance)-Number(t.amount_spent)})),O.pagination.total=a.data.total||0,F.total=a.data.total||0},Q=()=>{P()},X=()=>{P()},Y=(t,a)=>{let e=O.data;if("all"===t.range||"selected"===t.range&&(e=a),0===e.length)return c.error(I("no_data_export_message"));const s=t.filename||`account_${Date.now()}`;o(e,`${s+t.suffix}`)},q=()=>{b.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:I("confirm"),message:n(I("export_data_message"),I("export_data")),buttonSize:"large",center:!1,customClass:"la-message-box export-message"}).then(async()=>{Y({suffix:".xlsx",range:"current"},O.data)}).catch(()=>{})};return x(()=>{P()}),(o,n)=>{const u=a,d=s,p=i,c=r,_=e,b=l,g=t,f=m,h=w("loadings");return j((v(),V(f,{class:"hei"},{default:T(()=>[k(g,{ref_key:"tableRef",ref:D,option:N(O),"onUpdate:option":n[0]||(n[0]=t=>L(O)?O.value=t:null),onRefresh:P,onExport:Y,onPagination:P},{spend_cap:T(({row:t})=>[W(C(0===Number(t.spend_cap)?"-":t.spend_cap),1)]),disable_reason:T(({row:t})=>[W(C(N(F).disableList[t.disable_reason]),1)]),status:T(({row:t})=>[k(b,R(S(M(t.ad_account_status))),null,16)]),default:T(()=>[N(A)?(v(),V(u,{key:0,"show-text":"",onClick:q})):z("",!0),k(_,{option:N($),rules:N(J),onSearch:Q,onReset:X},{time:T(({row:t})=>[k(d,{modelValue:t.time,"onUpdate:modelValue":a=>t.time=a,teleported:!1},null,8,["modelValue","onUpdate:modelValue"])]),status:T(({row:t})=>[k(c,{modelValue:t.status,"onUpdate:modelValue":a=>t.status=a,teleported:!1,clearable:""},{default:T(()=>[(v(!0),H(U,null,B(N(F).statusList,t=>(v(),V(p,{key:t.status,label:t.text,value:t.status},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["option","rules"])]),_:1},8,["option"])]),_:1})),[[h,N(O).loading]])}}});export{I as default};
