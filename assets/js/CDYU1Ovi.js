import{S as e,aa as t,a3 as o,l as s,I as n,v as a,W as l,b as u,y as r,w as i,o as d,d as c,n as m,q as f,E as v}from"./qvIHbRqB.js";import{aC as p,q as E,A as h,r as y,bd as T,ah as S,aM as M,ad as L,aK as b}from"#entry";import{t as w}from"./BhNkJ2ei.js";let A;function Y(e,t){if(!p)return;if(!t)return void(e.scrollTop=0);const o=[];let s=t.offsetParent;for(;null!==s&&e!==s&&e.contains(s);)o.push(s),s=s.offsetParent;const n=t.offsetTop+o.reduce((e,t)=>e+t.offsetTop,0),a=n+t.offsetHeight,l=e.scrollTop,u=l+e.clientHeight;n<l?e.scrollTop=n:a>u&&(e.scrollTop=a-e.clientHeight)}var g=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(g||{});const C=o=>{const s=e(o)?o:[o],n=[];return s.forEach(o=>{var s;e(o)?n.push(...C(o)):t(o)&&(null==(s=o.component)?void 0:s.subTree)?n.push(o,...C(o.component.subTree)):t(o)&&e(o.children)?n.push(...C(o.children)):t(o)&&2===o.shapeFlag?n.push(...C(o.type())):n.push(o)}),n},N=e=>{if(!e)return{onClick:o,onMousedown:o,onMouseup:o};let t=!1,s=!1;return{onClick:o=>{t&&s&&e(o),t=s=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{s=e.target===e.currentTarget}}},x=E({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:y([String,Array,Object])},zIndex:{type:y([String,Number])}});const P=s({name:"ElOverlay",props:x,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const s=h("overlay"),{onClick:u,onMousedown:r,onMouseup:i}=N(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?n("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:r,onMouseup:i},[l(t,"default")],g.STYLE|g.CLASS|g.PROPS,["onClick","onMouseup","onMousedown"]):a("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[l(t,"default")])}}),_=(e,t,o,s)=>{const n={offsetX:0,offsetY:0},a=u(!1),l=(t,o)=>{if(e.value){const{offsetX:a,offsetY:l}=n,u=e.value.getBoundingClientRect(),r=u.left,i=u.top,d=u.width,c=u.height,m=document.documentElement.clientWidth,f=document.documentElement.clientHeight,v=-r+a,p=-i+l,E=m-r-d+a,h=f-i-(c<f?c:0)+l;(null==s?void 0:s.value)||(t=Math.min(Math.max(t,v),E),o=Math.min(Math.max(o,p),h)),n.offsetX=t,n.offsetY=o,e.value.style.transform=`translate(${T(t)}, ${T(o)})`}},c=e=>{const t=e.clientX,o=e.clientY,{offsetX:s,offsetY:u}=n,r=e=>{a.value||(a.value=!0);const n=s+e.clientX-t,r=u+e.clientY-o;l(n,r)},i=()=>{a.value=!1,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",i)},m=()=>{t.value&&e.value&&(t.value.removeEventListener("mousedown",c),window.removeEventListener("resize",f))},f=()=>{const{offsetX:e,offsetY:t}=n;l(e,t)};return r(()=>{i(()=>{o.value?t.value&&e.value&&(t.value.addEventListener("mousedown",c),window.addEventListener("resize",f)):m()})}),d(()=>{m()}),{isDragging:a,resetPosition:()=>{n.offsetX=0,n.offsetY=0,e.value&&(e.value.style.transform="")},updatePosition:f}},R=(e,t={})=>{c(e)||w("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||h("popup"),s=m(()=>o.bm("parent","hidden"));if(!p||S(document.body,s.value))return;let n=0,a=!1,l="0";const u=()=>{setTimeout(()=>{"undefined"!=typeof document&&a&&document&&(document.body.style.width=l,b(document.body,s.value))},200)};f(e,e=>{if(!e)return void u();a=!S(document.body,s.value),a&&(l=document.body.style.width,M(document.body,s.value)),n=(e=>{var t;if(!p)return 0;if(void 0!==A)return A;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const s=o.offsetWidth;o.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",o.appendChild(n);const a=n.offsetWidth;return null==(t=o.parentNode)||t.removeChild(o),A=s-a,A})(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,r=L(document.body,"overflowY");n>0&&(t||"scroll"===r)&&a&&(document.body.style.width=`calc(100% - ${n}px)`)}),v(()=>u())};export{P as E,R as a,N as b,C as f,Y as s,_ as u};
