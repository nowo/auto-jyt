import{_ as e,a,E as t,b as o}from"./CWcflZNr.js";import{a as s,b as l,E as r}from"./DeCiPARL.js";import{E as n}from"./CdvHYUIO.js";import{_ as d,a as p,m as i,e as u}from"./DaymMoic.js";import{_ as m}from"./dsrEqqer.js";import{E as c}from"./Br2YYjqU.js";import{_ as f}from"./6wzefA8c.js";import{b as h,h as y,i as _,k as b,E as g,p as w}from"#entry";import"./D3PoWbaM.js";import{E as j}from"./Cnq9u0K6.js";import{c as x}from"./CcutCi80.js";import{e as V}from"./B2NKXgsO.js";import{l as k,b as v,r as U,n as C,a6 as E,V as T,X as z,I as S,d as $,u as B,a7 as H,Z as I,a0 as M,a1 as P,A as R,H as A,ao as D,_ as N,$ as W}from"./qvIHbRqB.js";import{_ as F}from"./BCo6x5W8.js";import"./CWVXppPA.js";import"./BhNkJ2ei.js";import"./BmNVMyPn.js";import"./dXXNWbSs.js";import"./Bu3XdQOP.js";import"./CDYU1Ovi.js";import"./nWdyrA1p.js";import"./DTHePhLE.js";import"./BzC0bYcU.js";import"./HrbjBr_z.js";import"./C-SUzy-B.js";import"./B4uwOkQJ.js";const J={class:"flex items-center"},L={class:"flex w100% items-center"},O=F(k({__name:"index",setup(k){const{t:F}=h(),{isMobile:O}=y(),{statusConfig:X}=V(),Z=v();U({});const q=U({data:{account:"",title:"",time:["",""],state:"",status:[],dateType:"",spend:[],spendStart:"",spendEnd:""},config:[{column:{label:F("account_id"),prop:"title"},placeholder:F("account_id"),width:"160"},{column:{label:F("account_name"),prop:"account"},placeholder:F("account_name"),width:"160"},{column:{label:F("usd_spend"),prop:"spend"}},{column:{label:F("report_date"),prop:"time"}},{column:{label:F("status"),prop:"status"},placeholder:"",width:"100"},{column:{label:F("dates"),prop:"dateType"},placeholder:"",width:"100"}],hideBtn:!1}),G=U({money:[]}),K=U({data:[],tableHeader:[{property:"",label:"",type:"selection",width:"100",other:{isHide:!0}},{property:"id",label:F("account_id"),width:"180",sortable:!0},{property:"username",label:F("account_name"),minWidth:"180"},{property:"status",label:F("status"),width:"150"},{property:"account",label:F("usd_spend"),width:"180"},{property:"role",label:F("spend"),width:"150"},{property:"status",label:F("country"),width:"180"},{property:"status",label:F("rate"),width:"140"},{property:"created_at",label:F("report_date"),width:"220"},{property:"created_at",label:F("utc"),width:"220"}],pagination:_(w),isTool:!0,hideButton:{delete:!0,add:!0}}),Q=C({get:()=>q.data.status.map(e=>X.value.find(a=>a.key===e)),set:e=>{q.data.status=e.map(e=>e.key)}}),Y=Array.from({length:100}).fill(0).map((e,a)=>({id:a+1,username:`14ETVC-0521-3233-${a}`,account:`zhangsan${a}`,role:"管理员",status:Math.floor(4*Math.random()),created_at:`2022-01-01 12:00:${a+1}`})),ee=async()=>{const e=Y.slice(K.pagination.pageSize*(K.pagination.page-1),K.pagination.pageSize*K.pagination.page);console.log(e),K.data=e,K.pagination.total=Y.length},ae=()=>{ee()},te=()=>{ee()},oe=()=>{j.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:F("confirm"),message:i(F("export_data_message"),F("export_data")),buttonSize:"large",center:!1,customClass:"la-message-box export-message"}).then(async()=>{(e=>{let a=K.data;if(0===a.length)return g.error("No data to export");const t=e.filename||`consumption_${Date.now()}`;u(a,`${t+e.suffix}`)})({suffix:".xlsx"},K.data)}).catch(()=>{})};return ee(),(u,h)=>{const y=a,_=r,w=l,V=s,k=o,v=t,U=n,C=p,Y=d,se=m,le=c,re=e,ne=f;return T(),E(ne,{class:"hei"},{default:z(()=>[S(re,{ref_key:"tableRef",ref:Z,option:B(K),"onUpdate:option":h[1]||(h[1]=e=>$(K)?K.value=e:null),"hide-button":{add:!0,delete:!0},size:"large",onRefresh:ee,onPagination:ee},{status:z(({row:e})=>[S(se,{num:e.status},null,8,["num"])]),operate:z(({row:e})=>[("checkPermission"in u?u.checkPermission:B(x))("del")?(T(),E(le,{key:0,type:"danger",link:"",onClick:a=>(e=>{j.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:F("delete"),message:i(F("delete_seller_message"),F("delete_seller")),buttonSize:"large",center:!1,customClass:"message-box-error"}).then(async()=>{const a=await b("/api/v1/product/delete",{method:"post",body:{id:e.id}});if(200!==a.code)return g.error(a.msg);g.success("删除成功"),ee()}).catch(()=>{})})(e)},{default:z(()=>[...h[3]||(h[3]=[M(" 删除 ",-1)])]),_:1},8,["onClick"])):H("",!0)]),default:z(()=>[B(O)?(T(),E(y,{key:0,"show-text":"",onClick:oe})):H("",!0),S(Y,{option:B(q),"onUpdate:option":h[0]||(h[0]=e=>$(q)?q.value=e:null),rules:B(G),onSearch:ae,onReset:te},{status:z(({row:e})=>[S(V,{modelValue:e.status,"onUpdate:modelValue":a=>e.status=a,multiple:"",teleported:!1,"fit-input-width":"",offset:5},{tag:z(()=>[(T(!0),R(A,null,D(B(Q),e=>(T(),E(_,{key:e?.key,class:W(`tag-status-${e.type}`),type:"primary",effect:"light",size:"default",closable:"",onClose:a=>(e=>{const a=q.data.status.findIndex(a=>a===e);a>=0&&q.data.status.splice(a,1)})(e.key)},{default:z(()=>[M(P(e?.value),1)]),_:2},1032,["class","onClose"]))),128))]),default:z(()=>[(T(!0),R(A,null,D(B(X),e=>(T(),E(w,{key:e.key,label:e.value,value:e.key},{default:z(()=>[I("div",J,[S(_,{color:e.color,class:"mr8px op-70% min-w-25px b-0! h25px!"},null,8,["color"]),I("span",{style:N({color:e.color})},P(e.value),5)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),dateType:z(({row:e})=>[S(v,{modelValue:e.dateType,"onUpdate:modelValue":a=>e.dateType=a,size:"large"},{default:z(()=>[S(k,{label:"0"},{default:z(()=>[M(P(B(F)("each_day")),1)]),_:1}),S(k,{label:"1"},{default:z(()=>[M(P(B(F)("whole")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),spend:z(({row:e})=>[I("div",L,[S(U,{modelValue:e.spendStart,"onUpdate:modelValue":a=>e.spendStart=a,type:"number",placeholder:B(F)("spend_start")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),h[2]||(h[2]=I("span",{class:"px8px"},"-",-1)),S(U,{modelValue:e.spendEnd,"onUpdate:modelValue":a=>e.spendEnd=a,type:"number",placeholder:B(F)("spend_end")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),time:z(({row:e})=>[S(C,{modelValue:e.time,"onUpdate:modelValue":a=>e.time=a,teleported:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["option","rules"])]),_:1},8,["option"])]),_:1})}}}),[["__scopeId","data-v-126849dd"]]);export{O as default};
