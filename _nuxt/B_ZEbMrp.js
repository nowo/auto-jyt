import{_ as e}from"./DG-sOGPn.js";import{E as a}from"./SQlRK6VB.js";import{u as t,a as l,E as r,c as i}from"./CUFx-rjb.js";import{_ as d}from"./BjOnkRqe.js";import{a as s,b as o}from"./B4DcUaLU.js";import{e as m,m as u,r as n,n as p,i as c,o as f,j as b,w as _,b as h,c as g,P as y,df as V,Q as w,aT as x}from"#entry";import"./CU7A5Bla.js";const j=m({__name:"ApplyForm",emits:["update"],setup(m,{expose:j,emit:q}){const{t:v}=u(),L=n(),F=p({typeList:{create:v("account_create"),destroy:v("account_destroy")}}),U=n(),k=p({data:{id:0,p_id:0,title:"",title_en:"",href:"",icon:"",sort:0,status:1,imgList:[]}}),z=p({title:[{required:!0,whitespace:!0,message:v("required"),trigger:"blur"}],title_en:[{required:!0,whitespace:!0,message:v("required"),trigger:"blur"}],href:[{required:!0,whitespace:!0,message:v("required"),trigger:"blur"}],img:[{required:!0,whitespace:!0,message:v("required"),trigger:"blur"}]}),[R]=t(async()=>{if(await i(U.value))return Number(k.data.p_id),k.data.title?.trim(),k.data.title_en?.trim(),k.data.href?.trim(),Number(k.data.sort),k.data.status,k.data.icon?.trim(),await x(3e3),!0});return j({setFormData:(e,a)=>{L.value=e,"edit"===e&&a?(k.data.id=a.id,k.data.title=a.title||"",k.data.title_en=a.title_en||"",k.data.href=a.href||"",k.data.sort=a.sort||0,k.data.p_id=a.parent_id||"",k.data.status=a.status?1:0,k.data.imgList=a.icon?[a.icon]:[]):(k.data.id=0,k.data.title="",k.data.title_en="",k.data.href="",k.data.sort=0,k.data.status=1,k.data.icon="",k.data.imgList=[],a&&(k.data.p_id="number"==typeof a.id?a.id:""))},onConfirm:R,onReset:()=>{U.value?.resetFields()},formRef:U}),(t,i)=>{const m=e,u=a,n=r,p=d,x=o,j=s,q=l;return f(),c(q,{ref_key:"formRef",ref:U,"label-position":"top",model:b(k).data,rules:b(z),"label-width":"120px"},{default:_(()=>[h(n,{label:b(v)("email"),prop:"title"},{default:_(()=>[h(u,{modelValue:b(k).data.title,"onUpdate:modelValue":i[0]||(i[0]=e=>b(k).data.title=e),maxlength:"20",placeholder:b(v)("email_placeholder"),clearable:""},{prefix:_(()=>[h(m,{name:"icon-email",class:"text-15px"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),h(n,{label:b(v)("count"),prop:"sort"},{default:_(()=>[h(p,{modelValue:b(k).data.sort,"onUpdate:modelValue":i[1]||(i[1]=e=>b(k).data.sort=e),min:0,max:1e4,placeholder:"",class:"w-[calc(100%-50px)]!"},null,8,["modelValue"])]),_:1},8,["label"]),h(n,{label:b(v)("timezone"),prop:"href"},{default:_(()=>[h(j,{modelValue:b(k).data.href,"onUpdate:modelValue":i[2]||(i[2]=e=>b(k).data.href=e),clearable:"",filterable:"",disabled:"edit"===b(L)},{default:_(()=>[(f(!0),g(w,null,y("timezoneList"in t?t.timezoneList:b(V),e=>(f(),c(x,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),h(n,{label:b(v)("type"),prop:"icon"},{default:_(()=>[h(j,{modelValue:b(k).data.icon,"onUpdate:modelValue":i[3]||(i[3]=e=>b(k).data.icon=e),clearable:"",filterable:"",disabled:"edit"===b(L)},{default:_(()=>[(f(!0),g(w,null,y(b(F).typeList,(e,a)=>(f(),c(x,{key:a,label:e,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}}),q=Object.assign(j,{__name:"ApplyForm"});export{q as _};
