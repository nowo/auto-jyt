import{_ as e,a,E as t,b as o}from"./BMvQmN0w.js";import{a as s,b as l,E as r}from"./B4DcUaLU.js";import{E as n}from"./SQlRK6VB.js";import{_ as d,a as p,m as i,e as u}from"./BK7LxTwR.js";import{_ as m}from"./CKT0R8oa.js";import{E as c}from"./0z3QpR9y.js";import{_ as f}from"./DOPkDnub.js";import{e as h,m as y,F as _,r as b,n as g,G as w,L as j,i as x,o as V,w as k,b as v,k as U,j as E,J as C,a as T,d as z,t as S,c as $,Q as P,P as B,ac as M,s as I,O as R,E as A,K as F}from"#entry";import"./CU7A5Bla.js";import{E as G}from"./BlinpOi4.js";import{c as H}from"./BeLmGxmA.js";import{e as J}from"./CUFx-rjb.js";import{_ as K}from"./BCo6x5W8.js";import"./CswRQxWo.js";import"./DG-sOGPn.js";import"./DrWKMz2w.js";import"./DEHYWp1B.js";import"./6GL0nSLs.js";import"./DkR6NHue.js";import"./Da9BTocj.js";import"./R1ka0FRP.js";import"./CvVrXoim.js";import"./CW4AfUoy.js";import"./6axjBlJx.js";const L={class:"flex items-center"},O={class:"flex w100% items-center"},Q=K(h({__name:"index",setup(h){const{t:K}=y(),{isMobile:Q}=_(),{statusConfig:D}=J(),N=b();g({});const W=g({data:{account:"",title:"",time:["",""],state:"",status:[],dateType:"",spend:[],spendStart:"",spendEnd:""},config:[{column:{label:K("account_id"),prop:"title"},placeholder:K("account_id"),width:"160"},{column:{label:K("account_name"),prop:"account"},placeholder:K("account_name"),width:"160"},{column:{label:K("usd_spend"),prop:"spend"}},{column:{label:K("report_date"),prop:"time"}},{column:{label:K("status"),prop:"status"},placeholder:"",width:"100"},{column:{label:K("dates"),prop:"dateType"},placeholder:"",width:"100"}],hideBtn:!1}),q=g({money:[]}),X=g({data:[],tableHeader:[{property:"",label:"",type:"selection",width:"100",other:{isHide:!0}},{property:"id",label:K("account_id"),width:"180",sortable:!0},{property:"username",label:K("account_name"),minWidth:"180"},{property:"status",label:K("status"),width:"150"},{property:"account",label:K("usd_spend"),width:"180"},{property:"role",label:K("spend"),width:"150"},{property:"status",label:K("country"),width:"180"},{property:"status",label:K("rate"),width:"140"},{property:"created_at",label:K("report_date"),width:"220"},{property:"created_at",label:K("utc"),width:"220"}],pagination:w(F),isTool:!0,hideButton:{delete:!0,add:!0}}),Y=j({get:()=>W.data.status.map(e=>D.value.find(a=>a.key===e)),set:e=>{W.data.status=e.map(e=>e.key)}}),Z=Array.from({length:100}).fill(0).map((e,a)=>({id:a+1,username:`14ETVC-0521-3233-${a}`,account:`zhangsan${a}`,role:"管理员",status:Math.floor(4*Math.random()),created_at:`2022-01-01 12:00:${a+1}`})),ee=async()=>{const e=Z.slice(X.pagination.pageSize*(X.pagination.page-1),X.pagination.pageSize*X.pagination.page);console.log(e),X.data=e,X.pagination.total=Z.length},ae=()=>{ee()},te=()=>{ee()},oe=()=>{G.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:K("confirm"),message:i(K("export_data_message"),K("export_data")),buttonSize:"large",center:!1,customClass:"la-message-box export-message"}).then(async()=>{(e=>{let a=X.data;if(0===a.length)return A.error("No data to export");const t=e.filename||`consumption_${Date.now()}`;u(a,`${t+e.suffix}`)})({suffix:".xlsx"},X.data)}).catch(()=>{})};return ee(),(u,h)=>{const y=a,_=r,b=l,g=s,w=o,j=t,F=n,J=p,Z=d,se=m,le=c,re=e,ne=f;return V(),x(ne,{class:"hei"},{default:k(()=>[v(re,{ref_key:"tableRef",ref:N,option:E(X),"onUpdate:option":h[1]||(h[1]=e=>U(X)?X.value=e:null),"hide-button":{add:!0,delete:!0},size:"large",onRefresh:ee,onPagination:ee},{status:k(({row:e})=>[v(se,{num:e.status},null,8,["num"])]),operate:k(({row:e})=>[("checkPermission"in u?u.checkPermission:E(H))("del")?(V(),x(le,{key:0,type:"danger",link:"",onClick:a=>(e=>{G.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:K("delete"),message:i(K("delete_seller_message"),K("delete_seller")),buttonSize:"large",center:!1,customClass:"message-box-error"}).then(async()=>{const a=await R("/api/v1/product/delete",{method:"post",body:{id:e.id}});if(200!==a.code)return A.error(a.msg);A.success("删除成功"),ee()}).catch(()=>{})})(e)},{default:k(()=>[...h[3]||(h[3]=[z(" 删除 ",-1)])]),_:1},8,["onClick"])):C("",!0)]),default:k(()=>[E(Q)?(V(),x(y,{key:0,"show-text":"",onClick:oe})):C("",!0),v(Z,{option:E(W),"onUpdate:option":h[0]||(h[0]=e=>U(W)?W.value=e:null),rules:E(q),onSearch:ae,onReset:te},{status:k(({row:e})=>[v(g,{modelValue:e.status,"onUpdate:modelValue":a=>e.status=a,multiple:"",teleported:!1,"fit-input-width":"",offset:5},{tag:k(()=>[(V(!0),$(P,null,B(E(Y),e=>(V(),x(_,{key:e?.key,class:I(`tag-status-${e.type}`),type:"primary",effect:"light",size:"default",closable:"",onClose:a=>(e=>{const a=W.data.status.findIndex(a=>a===e);a>=0&&W.data.status.splice(a,1)})(e.key)},{default:k(()=>[z(S(e?.value),1)]),_:2},1032,["class","onClose"]))),128))]),default:k(()=>[(V(!0),$(P,null,B(E(D),e=>(V(),x(b,{key:e.key,label:e.value,value:e.key},{default:k(()=>[T("div",L,[v(_,{color:e.color,class:"mr8px op-70% min-w-25px b-0! h25px!"},null,8,["color"]),T("span",{style:M({color:e.color})},S(e.value),5)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),dateType:k(({row:e})=>[v(j,{modelValue:e.dateType,"onUpdate:modelValue":a=>e.dateType=a,size:"large"},{default:k(()=>[v(w,{label:"0"},{default:k(()=>[z(S(E(K)("each_day")),1)]),_:1}),v(w,{label:"1"},{default:k(()=>[z(S(E(K)("whole")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),spend:k(({row:e})=>[T("div",O,[v(F,{modelValue:e.spendStart,"onUpdate:modelValue":a=>e.spendStart=a,type:"number",placeholder:E(K)("spend_start")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),h[2]||(h[2]=T("span",{class:"px8px"},"-",-1)),v(F,{modelValue:e.spendEnd,"onUpdate:modelValue":a=>e.spendEnd=a,type:"number",placeholder:E(K)("spend_end")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]),time:k(({row:e})=>[v(J,{modelValue:e.time,"onUpdate:modelValue":a=>e.time=a,teleported:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["option","rules"])]),_:1},8,["option"])]),_:1})}}}),[["__scopeId","data-v-126849dd"]]);export{Q as default};
