import{_ as t,a as e}from"./BMvQmN0w.js";import{_ as a,a as s,e as o,m as n}from"./BK7LxTwR.js";import{a as r,b as i}from"./B4DcUaLU.js";import{_ as l}from"./CKT0R8oa.js";import{_ as u}from"./DOPkDnub.js";import{e as m,m as d,F as p,r as c,n as _,G as b,f,H as g,I as h,j as y,o as x,i as w,w as j,b as N,k as v,J as V,c as k,Q as T,P as L,R as z,S as U,d as E,t as H,E as R,K as S}from"#entry";import"./CU7A5Bla.js";import{E as B}from"./BlinpOi4.js";import"./0z3QpR9y.js";import"./SQlRK6VB.js";import{a as C}from"./lGknCrEW.js";import"./CswRQxWo.js";import"./DG-sOGPn.js";import"./BCo6x5W8.js";import"./CUFx-rjb.js";import"./Da9BTocj.js";import"./DrWKMz2w.js";import"./DEHYWp1B.js";import"./6GL0nSLs.js";import"./DkR6NHue.js";import"./R1ka0FRP.js";import"./CvVrXoim.js";import"./CW4AfUoy.js";import"./6axjBlJx.js";const F=(t,e=2)=>("string"==typeof t&&(t=Number(t)),t.toFixed(e)),I=m({__name:"index",setup(m){const{t:I}=d(),{isMobile:P}=p(),W=c(),G=_({statusList:[{status:1,num:5,text:I("active")},{status:2,num:2,text:I("disabled")},{status:3,num:1,text:I("unsettled")},{status:7,num:3,text:I("pending_risk_review")},{status:8,num:5,text:I("pending_settlement")},{status:9,num:5,text:I("in_grace_period")},{status:100,num:5,text:I("pending_closure")},{status:101,num:4,text:I("closed")},{status:201,num:4,text:I("any_active")},{status:202,num:4,text:I("any_closed")}],disableList:{0:I("none"),1:I("ads_integrity_policy"),2:I("ads_ip_review"),3:I("risk_payment"),4:I("gray_account_shut_down"),5:I("ads_afc_review"),6:I("business_integrity_rar"),7:I("permanent_close"),8:I("unused_reseller_account"),9:I("unused_account"),10:I("umbrella_ad_account"),11:I("business_manager_integrity_policy"),12:I("misrepresented_ad_account"),13:I("aoab_deshare_legal_entity"),14:I("ctx_thread_review"),15:I("compromised_ad_account")},total:0}),J=t=>{"string"==typeof t&&(t=Number.parseInt(t));const e=G.statusList.find(e=>e.status===t);return{num:e?.num,text:e?.text||""}},K=_({data:{account:"",account_name:"",time:["",""],state:"",status:"",bm_id:""},config:[{column:{label:I("ad_name"),prop:"account_name"},placeholder:I("ad_name"),width:"160",filterType:1},{column:{label:I("account_id"),prop:"account"},placeholder:I("account_id"),width:"160",filterType:1},{column:{label:I("status"),prop:"status"},placeholder:I("status"),width:"100",filterType:1},{column:{label:I("bm_id"),prop:"bm_id"},placeholder:I("bm_id"),width:"100",filterType:1}],hideBtn:!1,searchNum:0}),Q=_({money:[]}),$=_({data:[],tableHeader:[{type:"selection",width:"45",other:{isHide:!0}},{property:"ad_name",label:I("ad_name"),minWidth:"180",sortable:!0},{property:"ad_account_id",label:I("account_id"),width:"180"},{property:"account",label:I("bm_name"),width:"180"},{property:"role",label:I("bm_id"),width:"150",align:"left"},{property:"business_country_code",label:I("country"),width:"180"},{property:"status",label:I("status"),width:"180"},{property:"balance",label:I("balance"),width:"130",sortable:!0,formatter:(t,e,a)=>F(Number(a),4)},{property:"spend_cap",label:I("spend_cap"),width:"160",sortable:!0,formatter:(t,e,a)=>F(Number(a),4)},{property:"amount_spent",label:I("amount_spent"),width:"160",sortable:!0,formatter:(t,e,a)=>F(Number(a),4)},{property:"remaining_amount",label:I("remaining_amount"),minWidth:"190",sortable:!0,formatter:(t,e,a)=>F(Number(a),4)},{property:"disable_reason",label:I("disable_reason"),minWidth:"180"},{property:"timezone_name",label:I("timezone name"),width:"220"},{property:"operate",label:I("action"),width:"120",align:"left",fixed:"right",other:{isHide:!0}}],pagination:b(S),isTool:!0,hideButton:{add:!0,delete:!0}}),A=async()=>{const t={account_id:K.data.account.trim(),account_name:K.data.account_name.trim(),bm_id:K.data.bm_id.trim(),account_status:K.data.status,page:$.pagination.page,limit:$.pagination.pageSize};t.account_id||delete t.account_id,t.account_name||delete t.account_name,t.bm_id||delete t.bm_id,""===t.account_status&&delete t.account_status,$.loading=!0;const e=await C(t);if(console.log("res :>> ",e),$.loading=!1,200!==e.code)return R.error(e.msg);K.searchNum=(K.searchNum||0)+1,$.data=e.data.list.map(t=>({...t,balance:Number(t.balance),spend_cap:Number(t.spend_cap),amount_spent:Number(t.amount_spent),remaining_amount:Number(t.balance)-Number(t.amount_spent)})),$.pagination.total=e.data.total||0,G.total=e.data.total||0},D=()=>{A()},M=()=>{A()},O=(t,e)=>{let a=$.data;if("all"===t.range||"selected"===t.range&&(a=e),0===a.length)return R.error(I("no_data_export_message"));const s=t.filename||`account_${Date.now()}`;o(a,`${s+t.suffix}`)},q=()=>{B.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:I("confirm"),message:n(I("export_data_message"),I("export_data")),buttonSize:"large",center:!1,customClass:"la-message-box export-message"}).then(async()=>{O({suffix:".xlsx",range:"current"},$.data)}).catch(()=>{})};return f(()=>{A()}),(o,n)=>{const m=e,d=s,p=i,c=r,_=a,b=l,f=t,R=u,S=g("loadings");return h((x(),w(R,{class:"hei"},{default:j(()=>[N(f,{ref_key:"tableRef",ref:W,option:y($),"onUpdate:option":n[0]||(n[0]=t=>v($)?$.value=t:null),onRefresh:A,onExport:O,onPagination:A},{spend_cap:j(({row:t})=>[E(H(0===Number(t.spend_cap)?"-":t.spend_cap),1)]),disable_reason:j(({row:t})=>[E(H(y(G).disableList[t.disable_reason]),1)]),status:j(({row:t})=>[N(b,z(U(J(t.ad_account_status))),null,16)]),default:j(()=>[y(P)?(x(),w(m,{key:0,"show-text":"",onClick:q})):V("",!0),N(_,{option:y(K),rules:y(Q),onSearch:D,onReset:M},{time:j(({row:t})=>[N(d,{modelValue:t.time,"onUpdate:modelValue":e=>t.time=e,teleported:!1},null,8,["modelValue","onUpdate:modelValue"])]),status:j(({row:t})=>[N(c,{modelValue:t.status,"onUpdate:modelValue":e=>t.status=e,teleported:!1,clearable:""},{default:j(()=>[(x(!0),k(T,null,L(y(G).statusList,t=>(x(),w(p,{key:t.status,label:t.text,value:t.status},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["option","rules"])]),_:1},8,["option"])]),_:1})),[[S,y($).loading]])}}});export{I as default};
