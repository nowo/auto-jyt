import{_ as e,a as s}from"./DgFCvQ_G.js";import{E as a}from"./SQlRK6VB.js";import{u as o,E as l,a as r}from"./CUFx-rjb.js";import{_ as t}from"./DHOOLauY.js";import{E as m}from"./CswRQxWo.js";import{e as i,m as n,g as c,n as p,r as d,p as u,q as f,c as g,o as b,a as x,b as w,w as v,t as h,j as _,s as y,v as j,x as k,d as V,y as E,z as U,A as C,B as T,C as q,D,E as S}from"#entry";import{E as z}from"./0z3QpR9y.js";import{_ as B}from"./BCo6x5W8.js";import"./CU7A5Bla.js";import"./DG-sOGPn.js";import"./DEHYWp1B.js";import"./Da9BTocj.js";const F=""+new URL("logo-white.DI0tJvT_.svg",import.meta.url).href,I={class:"login-box h100vh w100% <sm:bg-#fff <sm:h-auto <sm:block!"},K={class:"login-left relative <sm:ma <sm:block! <md:px25px"},L={class:"translate-x-50% bottom-35px right-50% absolute"},M={class:"text-14px c-#84818a flex items-center <sm:c-#fff!"},R={class:"mx10px"},$={class:"login-bottom flex items-center <sm:h-unset!"},A={class:"mb65px <xs:mb25px"},G={class:"text-36px <sm:text-24px <sm:font-bold"},J={class:"pt6px sm:hidden"},O={class:"login-form-content"},P=B(i({__name:"login",setup(i){const{t:B}=n(),{localeProperties:P}=n(),{setUserLoginState:H,isFetch:N}=c();p({verify:""});const Q=d(),W=p({account:"",password:"",remember:!1,code:"",key:""}),X=p({account:[{required:!0,message:B("username_message")}],password:[{required:!0,message:B("password_message")}]}),Y=u("account",void 0),Z=(e,s="info")=>{S({message:e,type:s,appendTo:".login-left",grouping:!0})},[ee,se]=o(async()=>{if(N.value=!0,console.log("login :>> ","login"),!Q.value)return;if(!(await Q.value.validate((e,s)=>{if(!e&&s){const e=s,a=Object.keys(e)[0];if(a){const s=e[a]?.[0]?.message;Z(s,"error")}}})))return;const e={username:W.account?.trim(),password:W.password?.trim(),remember:!!W.remember};console.log("params :>> ",e);const s=await C(e);if(console.log("res :>> ",s),200!==s.code)return Z(s.msg,"error");if(!s.data.accessToken)return Z(B("login_error_message"),"error");if(await H("login",s.data.accessToken),W.remember){const e=T(`${W.account},${W.password}`);Y.value=e}else Y.value=void 0;const a=q();D(a("index"))}),ae=()=>{W.account?.trim()&&W.password?.trim()&&ee()};return f(()=>{(()=>{if(Y.value){const e=U(Y.value);if(e){const[s,a]=e.split(",");s&&a&&(W.account=s||"",W.password=a||"",W.remember=!0)}}})()}),(o,i)=>{const n=s,c=a,p=l,d=t,u=m,f=k,U=z,C=r;return b(),g("div",I,[i[6]||(i[6]=x("div",{class:"login-right flex items-center justify-center lt-sm:hidden"},[x("img",{src:F,alt:"logo"})],-1)),x("div",K,[i[5]||(i[5]=x("div",{class:"right-45px top-30px absolute <sm:b-b-1px <sm:b-[var(--co-main-border-color)] <sm:position-unset <sm:-mx25px"},[x("img",{class:"<sm:ma <sm:p15px",src:e,alt:"logo"})],-1)),x("div",L,[w(n,null,{default:v(()=>[x("div",M,[i[3]||(i[3]=x("i",{class:"i-custom-translate?mask text-20px i-icon"},null,-1)),x("span",R,h(_(P).name),1),i[4]||(i[4]=x("i",{class:"i-ep-arrow-down-bold"},null,-1))])]),_:1})]),x("div",$,[w(C,{ref_key:"formRef",ref:Q,model:_(W),rules:_(X),size:"large","label-position":"top",class:"login-form max-w-100% w385px <sm:w100%",onSubmit:E(_(ee),["prevent"])},{default:v(()=>[x("div",A,[x("h3",G,h(_(B)("sign_in")),1),x("p",J,h(_(B)("welcome")),1)]),x("div",O,[w(p,{label:_(B)("username"),prop:"account",class:y({"is-write":_(W).account})},{default:v(()=>[w(c,{modelValue:_(W).account,"onUpdate:modelValue":i[0]||(i[0]=e=>_(W).account=e),modelModifiers:{trim:!0},type:"text",maxlength:"20",placeholder:_(B)("username placeholder"),autofocus:"",clearable:"",tabindex:"1",onKeyup:j(ae,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label","class"]),w(p,{label:_(B)("password"),prop:"password",class:y({"is-write":_(W).password})},{default:v(()=>[w(d,{modelValue:_(W).password,"onUpdate:modelValue":i[1]||(i[1]=e=>_(W).password=e),modelModifiers:{trim:!0},maxlength:"30",type:"password",placeholder:_(B)("password placeholder"),"show-password":"",tabindex:"2",onKeyup:j(ae,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label","class"]),w(f,null,{default:v(()=>[w(p,null,{default:v(()=>[w(u,{modelValue:_(W).remember,"onUpdate:modelValue":i[2]||(i[2]=e=>_(W).remember=e),class:"remember",label:_(B)("remember_me")},null,8,["modelValue","label"])]),_:1})]),_:1}),w(p,{class:"login-animation4 <sm:pb5px"},{default:v(()=>[w(U,{type:"primary",class:"w100% h46px!",loading:_(se),tabindex:"4",onClick:_(ee)},{default:v(()=>[V(h(_(B)("login")),1)]),_:1},8,["loading","onClick"])]),_:1})])]),_:1},8,["model","rules","onSubmit"])])])])}}}),[["__scopeId","data-v-720cc35b"]]);export{P as default};
