import{bz as e,ax as t,bg as o,az as s,e as n,W as a,a3 as l,b as u,h as r,ad as i,X as d,r as c,f,aO as m,aI as v,co as p,k as E,L as h,b9 as y,a8 as T,bQ as b,b5 as L,cw as S,bO as M}from"#entry";import{t as g}from"./DG-sOGPn.js";let w;function Y(t,o){if(!e)return;if(!o)return void(t.scrollTop=0);const s=[];let n=o.offsetParent;for(;null!==n&&t!==n&&t.contains(n);)s.push(n),n=n.offsetParent;const a=o.offsetTop+s.reduce((e,t)=>e+t.offsetTop,0),l=a+o.offsetHeight,u=t.scrollTop,r=u+t.clientHeight;a<u?t.scrollTop=a:l>r&&(t.scrollTop=l-t.clientHeight)}var A=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(A||{});const C=e=>{const s=t(e)?e:[e],n=[];return s.forEach(e=>{var s;t(e)?n.push(...C(e)):o(e)&&(null==(s=e.component)?void 0:s.subTree)?n.push(e,...C(e.component.subTree)):o(e)&&t(e.children)?n.push(...C(e.children)):o(e)&&2===e.shapeFlag?n.push(...C(e.type())):n.push(e)}),n},x=e=>{if(!e)return{onClick:s,onMousedown:s,onMouseup:s};let t=!1,o=!1;return{onClick:s=>{t&&o&&e(s),t=o=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{o=e.target===e.currentTarget}}},N=a({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:d([String,Array,Object])},zIndex:{type:d([String,Number])}});const P=n({name:"ElOverlay",props:N,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const s=l("overlay"),{onClick:n,onMousedown:a,onMouseup:d}=x(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?u("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:n,onMousedown:a,onMouseup:d},[i(t,"default")],A.STYLE|A.CLASS|A.PROPS,["onClick","onMouseup","onMousedown"]):r("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[i(t,"default")])}}),_=(e,t,o,s)=>{const n={offsetX:0,offsetY:0},a=c(!1),l=(t,o)=>{if(e.value){const{offsetX:a,offsetY:l}=n,u=e.value.getBoundingClientRect(),r=u.left,i=u.top,d=u.width,c=u.height,f=document.documentElement.clientWidth,m=document.documentElement.clientHeight,v=-r+a,E=-i+l,h=f-r-d+a,y=m-i-(c<m?c:0)+l;(null==s?void 0:s.value)||(t=Math.min(Math.max(t,v),h),o=Math.min(Math.max(o,E),y)),n.offsetX=t,n.offsetY=o,e.value.style.transform=`translate(${p(t)}, ${p(o)})`}},u=e=>{const t=e.clientX,o=e.clientY,{offsetX:s,offsetY:u}=n,r=e=>{a.value||(a.value=!0);const n=s+e.clientX-t,r=u+e.clientY-o;l(n,r)},i=()=>{a.value=!1,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",i)},r=()=>{t.value&&e.value&&(t.value.removeEventListener("mousedown",u),window.removeEventListener("resize",i))},i=()=>{const{offsetX:e,offsetY:t}=n;l(e,t)};return f(()=>{m(()=>{o.value?t.value&&e.value&&(t.value.addEventListener("mousedown",u),window.addEventListener("resize",i)):r()})}),v(()=>{r()}),{isDragging:a,resetPosition:()=>{n.offsetX=0,n.offsetY=0,e.value&&(e.value.style.transform="")},updatePosition:i}},R=(t,o={})=>{E(t)||g("[useLockscreen]","You need to pass a ref param to this function");const s=o.ns||l("popup"),n=h(()=>s.bm("parent","hidden"));if(!e||y(document.body,n.value))return;let a=0,u=!1,r="0";const i=()=>{setTimeout(()=>{"undefined"!=typeof document&&u&&document&&(document.body.style.width=r,M(document.body,n.value))},200)};T(t,t=>{if(!t)return void i();u=!y(document.body,n.value),u&&(r=document.body.style.width,b(document.body,n.value)),a=(t=>{var o;if(!e)return 0;if(void 0!==w)return w;const s=document.createElement("div");s.className=`${t}-scrollbar__wrap`,s.style.visibility="hidden",s.style.width="100px",s.style.position="absolute",s.style.top="-9999px",document.body.appendChild(s);const n=s.offsetWidth;s.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",s.appendChild(a);const l=a.offsetWidth;return null==(o=s.parentNode)||o.removeChild(s),w=n-l,w})(s.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,l=L(document.body,"overflowY");a>0&&(o||"scroll"===l)&&u&&(document.body.style.width=`calc(100% - ${a}px)`)}),S(()=>i())};export{P as E,R as a,x as b,C as f,Y as s,_ as u};
