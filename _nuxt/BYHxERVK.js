import{e,bj as t,a7 as a,r,ca as n,f as l,cb as u,aI as i,h as o,bL as s,cc as c,cd as v,ce as f,L as d,c8 as p,cf as h,bY as g,D as y,cg as b,ch as m,ci as q,cj as x,ck as S,cl as C}from"#entry";function A(m){const q=m.componentName||"NuxtLink";function C(e){return!b&&"string"==typeof e&&e.startsWith("#")}function A(e){const a=t(),r=g(),n=d(()=>!!e.target&&"_self"!==e.target),l=d(()=>{const t=e.to||e.href||"";return"string"==typeof t&&p(t,{acceptRelative:!0})}),u=s("RouterLink"),i=u&&"string"!=typeof u?u.useLink:void 0,o=d(()=>{if(e.external)return!0;const t=e.to||e.href||"";return"object"!=typeof t&&(""===t||l.value)}),c=d(()=>{const t=e.to||e.href||"";return o.value?t:function(e,t,a){const r=a??m.trailingSlash;if(!e||"append"!==r&&"remove"!==r)return e;if("string"==typeof e)return k(e,r);const n="path"in e&&void 0!==e.path?e.path:t(e).path;return{...e,name:void 0,path:k(n,r)}}(t,a.resolve,e.trailingSlash)}),f=o.value?void 0:i?.({...e,to:c}),b=d(()=>{const t=e.trailingSlash??m.trailingSlash;if(!c.value||l.value||C(c.value))return c.value;if(o.value){const e="object"==typeof c.value&&"path"in c.value?v(c.value):c.value;return k("object"==typeof e?a.resolve(e).href:e,t)}return"object"==typeof c.value?a.resolve(c.value)?.href??null:k(h(r.app.baseURL,c.value),t)});return{to:c,hasTarget:n,isAbsoluteUrl:l,isExternal:o,href:b,isActive:f?.isActive??d(()=>c.value===a.currentRoute.value.path),isExactActive:f?.isExactActive??d(()=>c.value===a.currentRoute.value.path),route:f?.route??d(()=>a.resolve(c.value)),async navigate(t){await y(b.value,{replace:e.replace,external:o.value||n.value})}}}return e({name:q,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},prefetchOn:{type:[String,Object],default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1},trailingSlash:{type:String,default:void 0,required:!1}},useLink:A,setup(e,{slots:d}){const p=t(),{to:h,href:g,navigate:y,isExternal:b,hasTarget:q,isAbsoluteUrl:R}=A(e),k=a(!1),L=r(null),j=t=>{L.value=e.custom?t?.$el?.nextElementSibling:t?.$el};function O(t){return!k.value&&("string"==typeof e.prefetchOn?e.prefetchOn===t:e.prefetchOn?.[t]??m.prefetchOn?.[t])&&!1!==(e.prefetch??m.prefetch)&&!0!==e.noPrefetch&&"_blank"!==e.target&&!function(){const e=navigator.connection;if(e&&(e.saveData||w.test(e.effectiveType)))return!0;return!1}()}async function E(e=n()){if(k.value)return;k.value=!0;const t="string"==typeof h.value?h.value:b.value?v(h.value):p.resolve(h.value).fullPath,a=b.value?new URL(t,window.location.href).href:t;await Promise.all([e.hooks.callHook("link:prefetch",a).catch(()=>{}),!b.value&&!q.value&&f(h.value,p).catch(()=>{})])}if(O("visibility")){const e=n();let t,a=null;l(()=>{const r=function(){const e=n();if(e._observer)return e._observer;let t=null;const a=new Map,r=(e,r)=>(t||=new IntersectionObserver(e=>{for(const t of e){const e=a.get(t.target);(t.isIntersecting||t.intersectionRatio>0)&&e&&e()}}),a.set(e,r),t.observe(e),()=>{a.delete(e),t?.unobserve(e),0===a.size&&(t?.disconnect(),t=null)}),l=e._observer={observe:r};return l}();u(()=>{t=x(()=>{L?.value?.tagName&&(a=r.observe(L.value,async()=>{a?.(),a=null,await E(e)}))})})}),i(()=>{t&&S(t),a?.(),a=null})}return()=>{if(!b.value&&!q.value&&!C(h.value)){const t={ref:j,to:h.value,activeClass:e.activeClass||m.activeClass,exactActiveClass:e.exactActiveClass||m.exactActiveClass,replace:e.replace,ariaCurrentValue:e.ariaCurrentValue,custom:e.custom};return e.custom||(O("interaction")&&(t.onPointerenter=E.bind(null,void 0),t.onFocus=E.bind(null,void 0)),k.value&&(t.class=e.prefetchedClass||m.prefetchedClass),t.rel=e.rel||void 0),o(s("RouterLink"),t,d.default)}const t=e.target||null,a=((...e)=>e.find(e=>void 0!==e))(e.noRel?"":e.rel,m.externalRelAttribute,R.value||q.value?"noopener noreferrer":"")||null;return e.custom?d.default?d.default({href:g.value,navigate:y,prefetch:E,get route(){if(!g.value)return;const e=new URL(g.value,window.location.href);return{path:e.pathname,fullPath:e.pathname,get query(){return c(e.search)},hash:e.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:g.value}},rel:a,target:t,isExternal:b.value||q.value,isActive:!1,isExactActive:!1}):null:o("a",{ref:L,href:g.value||null,rel:a,target:t,onClick:t=>{if(!b.value&&!q.value)return t.preventDefault(),e.replace?p.replace(g.value):p.push(g.value)}},d.default?.())}}})}const R=A(C);function k(e,t){const a="append"===t?m:q;return p(e)&&!e.startsWith("http")?e:a(e,!0)}const w=/2g/;export{R as _};
