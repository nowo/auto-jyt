import{_ as e,a as t}from"./BMvQmN0w.js";import{_ as a,a as o,m as i,e as r}from"./BK7LxTwR.js";import{E as s}from"./B4DcUaLU.js";import{E as l}from"./0z3QpR9y.js";import{_ as n}from"./CgxKhdzJ.js";import{_ as d}from"./6GL0nSLs.js";import{e as m,m as p,r as u,n as c,L as f,M as _,i as g,o as h,j as x,N as b,w as j,b as y,F as w,G as v,k,J as C,d as q,C as R,D as E,O as z,E as M,K as V}from"#entry";import{b as T}from"./CUFx-rjb.js";import{_ as B}from"./DOPkDnub.js";import{E as D}from"./BlinpOi4.js";import"./SQlRK6VB.js";import"./CswRQxWo.js";import"./DG-sOGPn.js";import"./BCo6x5W8.js";import"./DrWKMz2w.js";import"./CU7A5Bla.js";import"./DEHYWp1B.js";import"./Da9BTocj.js";import"./R1ka0FRP.js";import"./CvVrXoim.js";import"./CW4AfUoy.js";import"./6axjBlJx.js";import"./DkR6NHue.js";import"./BwQPCbE8.js";import"./CKT0R8oa.js";const F=m({__name:"PixelModal",emits:["update"],setup(e,{expose:t,emit:a}){const{t:o}=p(),i=a,r=u(),s=c({visible:!1,ready:!1,hrefList:["/","/about","/product","/news","/service","/recruit","/contact"]}),l=f(()=>"add"===r.value?{title:o("create")}:{title:o("edit")}),m=_("formRef");c({data:{id:0,p_id:0,title:"",title_en:"",href:"",icon:"",sort:0,status:1,imgList:[]}}),c({title:[{required:!0,whitespace:!0,message:o("required"),trigger:"blur"}],title_en:[{required:!0,whitespace:!0,message:o("required"),trigger:"blur"}],href:[{required:!0,whitespace:!0,message:o("required"),trigger:"blur"}],img:[{required:!0,whitespace:!0,message:o("required"),trigger:"blur"}]});const w=()=>{m.value?.formRef?.resetFields()},[v,k]=T(),C=b(async()=>{if(!m.value)return;const e=await v(m.value?.onConfirm());console.log("res0000 :>> ",e),!0===e&&(i("update"),s.visible=!1)},800);return t({openModal:(e,t)=>{r.value=e,m.value?.setFormData(e,t),s.visible=!0}}),(e,t)=>{const a=n,o=d;return h(),g(o,{modelValue:x(s).visible,"onUpdate:modelValue":t[0]||(t[0]=e=>x(s).visible=e),name:"drawer","hide-full":"",title:x(l).title,loading:x(k),width:"480px",size:550,direction:"rtl",onCancel:w,onConfirm:x(C)},{default:j(()=>[y(a,{ref_key:"formRef",ref:m,class:"max-w-100% w650px"},null,512)]),_:1},8,["modelValue","title","loading","onConfirm"])}}}),L=Object.assign(F,{__name:"PixelModal"}),S=m({__name:"index",setup(n){const{t:d}=p(),{isMobile:m}=w(),u=_("modalRef");c({});const f=c({data:{account:"",title:"",apply_id:"",time:["",""],state:""},config:[{column:{label:d("id"),prop:"title"},placeholder:d("id"),width:"160"},{column:{label:d("pixel_name"),prop:"account"},placeholder:d("pixel_name"),width:"160"},{column:{label:d("pixel_id"),prop:"state"},placeholder:d("pixel_id"),width:"100"}],hideBtn:!1}),b=c({money:[]}),T=c({data:[],tableHeader:[{type:"selection",width:"100",other:{isHide:!0}},{property:"id",label:d("id"),minWidth:"180",sortable:!0},{property:"username",label:d("pixel_name"),minWidth:"180"},{property:"role",label:d("pixel_id"),minWidth:"150"}],pagination:v(V),isTool:!0,hideButton:{delete:!0}}),F=async()=>{T.data=[{id:1,username:"张三",account:"zhangsan",role:"管理员",status:"正常",created_at:"2022-01-01 12:00:00"},{id:2,username:"李四",account:"lisi",role:"普通用户",status:"禁用",created_at:"2022-01-02 12:00:00"}],T.pagination.total=2},S=()=>{F()},U=()=>{F()},O=(e,t)=>{if(m.value){const e=R();E(e("pixel-create"))}else u.value?.openModal(e,t)},P=()=>{D.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:d("confirm"),message:i(d("export_data_message"),d("export_data")),buttonSize:"large",center:!1,customClass:"la-message-box export-message"}).then(async()=>{(e=>{let t=T.data;if(0===t.length)return M.error(d("no_data_export_message"));const a=e.filename||`account_${Date.now()}`;r(t,`${a+e.suffix}`)})({suffix:".xlsx"},T.data)}).catch(()=>{})};return F(),(r,n)=>{const p=t,c=o,_=a,w=s,v=l,R=e,E=L,V=B;return h(),g(V,null,{default:j(()=>[y(R,{option:x(T),"onUpdate:option":n[2]||(n[2]=e=>k(T)?T.value=e:null),size:"large",onRefresh:F,onAdd:n[3]||(n[3]=e=>O("add")),onEdit:n[4]||(n[4]=e=>O("edit"))},{status:j(({row:e})=>[e.status?(h(),g(w,{key:0,type:"primary"},{default:j(()=>[...n[5]||(n[5]=[q(" 启用 ",-1)])]),_:1})):(h(),g(w,{key:1,type:"info"},{default:j(()=>[...n[6]||(n[6]=[q(" 禁用 ",-1)])]),_:1}))]),operate:j(({row:e})=>[y(v,{type:"primary",link:"",onClick:t=>O("edit",e)},{default:j(()=>[...n[7]||(n[7]=[q(" Edit ",-1)])]),_:1},8,["onClick"]),y(v,{type:"danger",link:"",onClick:t=>(e=>{D.confirm("此操作将永久删除该条内容，是否继续?","",{confirmButtonText:d("delete"),message:i(d("delete_seller_message"),d("delete_seller")),buttonSize:"large",center:!1,customClass:"message-box-error"}).then(async()=>{const t=await z("/api/v1/product/delete",{method:"post",body:{id:e.id}});if(200!==t.code)return M.error(t.msg);M.success("删除成功"),F()}).catch(()=>{})})(e)},{default:j(()=>[...n[8]||(n[8]=[q(" Del ",-1)])]),_:1},8,["onClick"])]),default:j(()=>[x(m)?(h(),g(p,{key:0,"show-text":"",onClick:P})):C("",!0),y(_,{option:x(f),"onUpdate:option":n[1]||(n[1]=e=>k(f)?f.value=e:null),rules:x(b),onSearch:S,onReset:U},{time:j(()=>[y(c,{modelValue:x(f).data.time,"onUpdate:modelValue":n[0]||(n[0]=e=>x(f).data.time=e),type:"daterange","range-separator":"To",teleported:!1},null,8,["modelValue"])]),_:1},8,["option","rules"])]),_:1},8,["option"]),y(E,{ref_key:"modalRef",ref:u},null,512)]),_:1})}}});export{S as default};
